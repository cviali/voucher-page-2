{
  "version": "6",
  "dialect": "sqlite",
  "id": "b70e8a13-cd82-4196-a689-2ec7f5039b6d",
  "prevId": "858b2f2d-081c-4df7-9fb0-756fb5fab259",
  "tables": {
    "audit_logs": {
      "name": "audit_logs",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "action": {
          "name": "action",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "details": {
          "name": "details",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "user_id": {
          "name": "user_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "username": {
          "name": "username",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "ip_address": {
          "name": "ip_address",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "audit_user_idx": {
          "name": "audit_user_idx",
          "columns": [
            "user_id"
          ],
          "isUnique": false
        },
        "audit_created_at_idx": {
          "name": "audit_created_at_idx",
          "columns": [
            "created_at"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "audit_logs_user_id_users_id_fk": {
          "name": "audit_logs_user_id_users_id_fk",
          "tableFrom": "audit_logs",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "redemptions": {
      "name": "redemptions",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "voucher_id": {
          "name": "voucher_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "customer_phone_number": {
          "name": "customer_phone_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "amount": {
          "name": "amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "processed_by": {
          "name": "processed_by",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "redemption_voucher_idx": {
          "name": "redemption_voucher_idx",
          "columns": [
            "voucher_id"
          ],
          "isUnique": false
        },
        "redemption_customer_phone_idx": {
          "name": "redemption_customer_phone_idx",
          "columns": [
            "customer_phone_number"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "redemptions_voucher_id_vouchers_id_fk": {
          "name": "redemptions_voucher_id_vouchers_id_fk",
          "tableFrom": "redemptions",
          "tableTo": "vouchers",
          "columnsFrom": [
            "voucher_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "redemptions_customer_phone_number_users_phone_number_fk": {
          "name": "redemptions_customer_phone_number_users_phone_number_fk",
          "tableFrom": "redemptions",
          "tableTo": "users",
          "columnsFrom": [
            "customer_phone_number"
          ],
          "columnsTo": [
            "phone_number"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "redemptions_processed_by_users_username_fk": {
          "name": "redemptions_processed_by_users_username_fk",
          "tableFrom": "redemptions",
          "tableTo": "users",
          "columnsFrom": [
            "processed_by"
          ],
          "columnsTo": [
            "username"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "templates": {
      "name": "templates",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "image_url": {
          "name": "image_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "users": {
      "name": "users",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "username": {
          "name": "username",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "password": {
          "name": "password",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "phone_number": {
          "name": "phone_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "date_of_birth": {
          "name": "date_of_birth",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'customer'"
        },
        "total_spending": {
          "name": "total_spending",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": 0
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "users_username_unique": {
          "name": "users_username_unique",
          "columns": [
            "username"
          ],
          "isUnique": true
        },
        "users_phone_number_unique": {
          "name": "users_phone_number_unique",
          "columns": [
            "phone_number"
          ],
          "isUnique": true
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "visits": {
      "name": "visits",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "customer_phone_number": {
          "name": "customer_phone_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "processed_by": {
          "name": "processed_by",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "revoked_at": {
          "name": "revoked_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "revoked_by": {
          "name": "revoked_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "revocation_reason": {
          "name": "revocation_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "is_reward_generated": {
          "name": "is_reward_generated",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": false
        },
        "reward_voucher_id": {
          "name": "reward_voucher_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "visit_customer_phone_idx": {
          "name": "visit_customer_phone_idx",
          "columns": [
            "customer_phone_number"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "visits_customer_phone_number_users_phone_number_fk": {
          "name": "visits_customer_phone_number_users_phone_number_fk",
          "tableFrom": "visits",
          "tableTo": "users",
          "columnsFrom": [
            "customer_phone_number"
          ],
          "columnsTo": [
            "phone_number"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "visits_processed_by_users_username_fk": {
          "name": "visits_processed_by_users_username_fk",
          "tableFrom": "visits",
          "tableTo": "users",
          "columnsFrom": [
            "processed_by"
          ],
          "columnsTo": [
            "username"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "visits_revoked_by_users_username_fk": {
          "name": "visits_revoked_by_users_username_fk",
          "tableFrom": "visits",
          "tableTo": "users",
          "columnsFrom": [
            "revoked_by"
          ],
          "columnsTo": [
            "username"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "visits_reward_voucher_id_vouchers_id_fk": {
          "name": "visits_reward_voucher_id_vouchers_id_fk",
          "tableFrom": "visits",
          "tableTo": "vouchers",
          "columnsFrom": [
            "reward_voucher_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "vouchers": {
      "name": "vouchers",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "template_id": {
          "name": "template_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'available'"
        },
        "binded_to_phone_number": {
          "name": "binded_to_phone_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "expiry_date": {
          "name": "expiry_date",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "approved_at": {
          "name": "approved_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "approved_by": {
          "name": "approved_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "used_at": {
          "name": "used_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "claim_requested_at": {
          "name": "claim_requested_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "spent_amount": {
          "name": "spent_amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": 0
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "image_url": {
          "name": "image_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "vouchers_code_unique": {
          "name": "vouchers_code_unique",
          "columns": [
            "code"
          ],
          "isUnique": true
        },
        "phone_number_idx": {
          "name": "phone_number_idx",
          "columns": [
            "binded_to_phone_number"
          ],
          "isUnique": false
        },
        "status_idx": {
          "name": "status_idx",
          "columns": [
            "status"
          ],
          "isUnique": false
        },
        "created_at_idx": {
          "name": "created_at_idx",
          "columns": [
            "created_at"
          ],
          "isUnique": false
        },
        "template_id_idx": {
          "name": "template_id_idx",
          "columns": [
            "template_id"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "vouchers_template_id_templates_id_fk": {
          "name": "vouchers_template_id_templates_id_fk",
          "tableFrom": "vouchers",
          "tableTo": "templates",
          "columnsFrom": [
            "template_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "vouchers_binded_to_phone_number_users_phone_number_fk": {
          "name": "vouchers_binded_to_phone_number_users_phone_number_fk",
          "tableFrom": "vouchers",
          "tableTo": "users",
          "columnsFrom": [
            "binded_to_phone_number"
          ],
          "columnsTo": [
            "phone_number"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "vouchers_approved_by_users_username_fk": {
          "name": "vouchers_approved_by_users_username_fk",
          "tableFrom": "vouchers",
          "tableTo": "users",
          "columnsFrom": [
            "approved_by"
          ],
          "columnsTo": [
            "username"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    }
  },
  "views": {},
  "enums": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "indexes": {}
  }
}